var VPortal,VSystem,watchArray;VPortal=function(){function t(){var t,n,o,s,u,i;for(2===arguments.length?(this.value=arguments[0],this.portals=arguments[1]):this.portals=arguments[0],i=this,t=function(t){var n;if(t[0][t[1]]&&!i.value&&(i.value=t[0][t[1]]),t[0][t[1]]||(t[0][t[1]]=void 0),n=Object.getOwnPropertyDescriptor(t[0],t[1])){if(e&&(n.get||n.set))throw new Error("You can use only 1 dominant property descriptor!");e=n.get,r=n.set}try{return Object.defineProperty(t[0],t[1],{get:function(){return e?e():i.value},set:function(t){return r?r(t):i.value=t}})}catch(t){return t,console.log(new Error('You must set "configurable" in "Object.defineProperty", or you can get bad results!'))}},this.portals=watchArray(this.portals,function(e){var r;if("object"==typeof(r=e)&&r[0]&&r[1])return t(r)}),n=0,o=(u=this.portals).length;n<o;n++)s=u[n],t(s)}var e,r;return e=void 0,r=void 0,t.prototype.desynchronize=function(){var t,e,r,n,o;for(o=[],t=0,e=(n=this.portals).length;t<e;t++)r=n[t],o.push(Object.defineProperty(r[0],r[1],{enumerable:!1,writable:!1,configurable:!1,value:this.value}));return o},t.prototype.desync=function(){return this.desynchronize.apply(this,arguments)},t}(),watchArray=function(t,e){return new Proxy(t,{set:function(t,r,n,o){return t[r]=n,e(n),!0}})},VSystem=function(){function t(t){this.model=null!=t?t:{},this.paths=n(e(this.model))}var e,r,n;return e=function(){var t,e;return t=[],e=function(r,n){var o,s,u;null==n&&(n={steps:[]}),u=[];for(s in r)"number"==typeof r[s]||"string"==typeof r[s]?(o={steps:n.steps.concat(),name:s,value:r[s]},u.push(t.push(o))):"object"==typeof r[s]?(o={steps:n.steps.concat(s)},u.push(e(r[s],o))):u.push(void 0);return u},function(r){return e(r),t}}(),n=function(t){var e,r,n,o;for(o={},e=0,r=t.length;e<r;e++)o[(n=t[e]).value]||(o[n.value]=[]),o[n.value].push({steps:n.steps,name:n.name});return o},r=function(t,e,r){var n,o,s,u,i,a,p,c,l,h,f,y;a=[];for(y in t){for(n=[],o=0,s=(f=t[y]).length;o<s;o++){(i=f[o]).steps[0]&&(p=r[i.steps[0]]),l=i.steps;for(u in l)h=l[u],0!==u&&p[h]&&(p=p[h]);n.push([p,i.name])}e[y]?a.push(new VPortal(e[y],n)):"object"!=typeof e?a.push(new VPortal(e,n)):a.push(new VPortal(n))}return c={desynchronize:function(){var t,e,r,n;for(n=[],t=0,e=a.length;t<e;t++)r=a[t],n.push(r.desync());return n}},c.desync=c.desynchronize,c},void 0,t.prototype.install=function(){var t,e;return 2===arguments.length?(t=arguments[0],e=arguments[1]):(e=arguments[0],t={}),r(this.paths,t,e).desync},t}(),"object"==typeof process&&"object"==typeof process.versions&&void 0!==process.versions.node&&(module.exports.VPortal=VPortal,module.exports.VSystem=VSystem);